{{- if .is_mac -}}

{{- $extensions := list
    "anthropic.claude-code"
    "eamodio.gitlens"
    "editorconfig.editorconfig"
    "esbenp.prettier-vscode"
    "github.vscode-github-actions"
    "graphql.vscode-graphql"
    "gruntfuggly.todo-tree"
    "mechatroner.rainbow-csv"
    "mhutchie.git-graph"
    "rangav.vscode-thunder-client"
    "redhat.vscode-xml"
    "redhat.vscode-yaml"
    "tamasfe.even-better-toml"
-}}

{{- if .with_javascript -}}
{{-   $extensions = concat $extensions (list
        "bradlc.vscode-tailwindcss"
        "dbaeumer.vscode-eslint"
        "vitest.explorer"
        "yoavbls.pretty-ts-errors"
    ) -}}
{{- end -}}

{{- if .with_docker -}}
{{-   $extensions = concat $extensions (list
        "ms-azuretools.vscode-containers"
        "ms-azuretools.vscode-docker"
    ) -}}
{{- end -}}

{{- if .with_rust -}}
{{-   $extensions = concat $extensions (list
        "rust-lang.rust-analyzer"
        "serayuzgur.crates"
    ) -}}
{{- end -}}

{{- if .with_terraform -}}
{{-   $extensions = concat $extensions (list "hashicorp.terraform") -}}
{{- end -}}

#!/bin/bash

set -euo pipefail

# Include common functions
{{ template "common.tmpl" . }}

if ! check_command cursor; then
    log_warn "Cursor not found. Skipping extensions installation."
    exit 0
fi

log_info "Installing Cursor extensions..."

{{ range ($extensions | sortAlpha | uniq) -}}
log_info "  Installing {{ . }}..."
cursor --install-extension "{{ . }}" --force 2>/dev/null || log_warn "Failed to install {{ . }}"
{{ end -}}

log_success "Cursor extensions installation complete"

{{- end -}}
